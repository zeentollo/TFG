{"version":3,"file":"js/367.cbdcdc24.js","mappings":"kmBAwBA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,IAAI,IACZC,GAAOD,EAAAA,EAAAA,IAAI,IACXE,GAASC,EAAAA,EAAAA,MAETC,EAAQC,UACZ,MAAMC,EAAO,CACXP,MAAOA,EAAMQ,MACbN,KAAMA,EAAKM,OAGb,IACE,MAAMC,QAAiBC,EAAAA,EAAMC,KAAK,2CAA4CJ,EAAM,CAClFK,QAAS,CACP,eAAgB,sBAIdC,EAAUJ,EAASF,KAAK,GAEP,KAAnBE,EAASK,SACXhB,EAAMiB,OAAO,kBAAmBF,EAAQ,GAAGG,MAC3ClB,EAAMiB,OAAO,aAAcF,EAAQ,GAAGI,IACtCC,aAAaC,QAAQ,QAASV,EAASF,KAAK,IAE5Ca,IAAAA,KAAU,CACRC,SAAU,MACVC,KAAM,UACNC,MAAO,sCACPC,mBAAmB,EACnBC,MAAO,OAETtB,EAAOuB,KAAK,gBAGhB,CAAE,MAAOC,GACHA,EAAMlB,UACRmB,QAAQD,MAAM,mCAAoCA,EAAMlB,SAASF,MACjEa,IAAAA,KACE,UACA,wDACA,UAGOO,EAAME,SACfD,QAAQD,MAAM,sBAAuBA,EAAME,SAC3CT,IAAAA,KACE,UACA,wDACA,WAIFQ,QAAQD,MAAM,SAAUA,EAAMG,SAC9BV,IAAAA,KACE,UACA,wDACA,UAIJQ,QAAQD,MAAM,0BAA2BA,EAAMI,QAC/CX,IAAAA,KACI,UACA,wDACA,QAEN,G,msBCrFF,MAAMY,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://tfg/./src/views/IniciarView.vue","webpack://tfg/./src/views/IniciarView.vue?0e20"],"sourcesContent":["<template>\n  <section id=\"principal\">\n    <img id=\"img_principal\" src=\"@/assets/img/principal.gif\">\n    <div id=\"div_principal\">\n      <div id=\"div_arriba\">\n        <p id=\"eslogan\">PARA COMENZAR, INICIA SESIÓN</p>\n        <router-link to=\"/register\" id=\"pregunta\">¿No tienes cuenta? Regístrate</router-link>\n      </div>\n      <form id=\"formulario\" @submit.prevent=\"login\">\n        <input class=\"inputs\" v-model=\"email\" type=\"email\" placeholder=\"Indique su correo electrónico\" required>\n        <input class=\"inputs\" v-model=\"pass\" type=\"password\" placeholder=\"Indique su contraseña\" required>\n        <button id=\"boton\" type=\"submit\">ACCEDER</button>\n      </form>\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport axios from 'axios'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport Swal from 'sweetalert2'\n\nconst store = useStore()\nconst email = ref(\"\")\nconst pass = ref(\"\")\nconst router = useRouter()\n\nconst login = async () => {\n  const data = {\n    email: email.value,\n    pass: pass.value,\n  }\n\n  try {\n    const response = await axios.post(\"https://tfg-izsx.onrender.com:3000/login\", data, {\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    })\n\n    const usuario = response.data[0]\n\n    if (response.status == 200) {\n      store.commit(\"esNombreUsuario\", usuario[0].name)\n      store.commit(\"esNombreId\", usuario[0].id)\n      localStorage.setItem(\"token\", response.data[1])\n\n      Swal.fire({\n        position: \"top\",\n        icon: \"success\",\n        title: \"¡Has iniciado sesión correctamente!\",\n        showConfirmButton: false,\n        timer: 1500\n      });\n      router.push(\"/seleccionar\")\n    }\n\n  } catch (error) {\n    if (error.response) {\n      console.error('Error de respuesta del servidor:', error.response.data)\n      Swal.fire(\n        '¡Error!',\n        'Error con el usuario, revisa los campos introducidos.',\n        'error'\n      );\n\n    } else if (error.request) {\n      console.error('Error de solicitud:', error.request)\n      Swal.fire(\n        '¡Error!',\n        'Error con el usuario, revisa los campos introducidos.',\n        'error'\n      );\n\n    } else {\n      console.error('Error:', error.message)\n      Swal.fire(\n        '¡Error!',\n        'Error con el usuario, revisa los campos introducidos.',\n        'error'\n      );\n    }\n    \n    console.error('Error de configuración:', error.config)\n    Swal.fire(\n        '¡Error!',\n        'Error con el usuario, revisa los campos introducidos.',\n        'error'\n      );\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#principal {\n  background-image: url(\"@/assets/img/fondo.jpg\");\n  background-size: cover;\n  background-position: center;\n}\n\n#img_principal {\n  width: 100%;\n  height: 90vh;\n}\n\n#div_principal {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n}\n\n#div_arriba {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n  margin: 100px;\n\n  #eslogan {\n    margin: 50px;\n    letter-spacing: 4px;\n    font-size: 40px;\n  }\n\n  #pregunta {\n    text-decoration: none;\n    color: #8F8F8F;\n    font-weight: bold;\n    letter-spacing: 4px;\n    font-size: 32px;\n  }\n}\n\n#formulario {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  text-align: center;\n\n  .inputs {\n    width: 100vh;\n    height: 50px;\n    border-radius: 10px;\n    border: 1px solid;\n    background-color: #F2F2F2;\n    padding: 10px;\n    margin: 10px;\n    letter-spacing: 4px;\n    font-size: 22px;\n    margin: 40px;\n  }\n\n  #boton {\n    margin: 100px;\n    cursor: pointer;\n    background-color: #454545;\n    color: white;\n    font-weight: bold;\n    letter-spacing: 4px;\n    font-size: 32px;\n    padding: 10px;\n    letter-spacing: 4px;\n  }\n\n  #boton:hover {\n    color: rgb(218, 218, 255);\n  }\n}\n</style>\n","import script from \"./IniciarView.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./IniciarView.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./IniciarView.vue?vue&type=style&index=0&id=64d5a539&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-64d5a539\"]])\n\nexport default __exports__"],"names":["store","useStore","email","ref","pass","router","useRouter","login","async","data","value","response","axios","post","headers","usuario","status","commit","name","id","localStorage","setItem","Swal","position","icon","title","showConfirmButton","timer","push","error","console","request","message","config","__exports__"],"sourceRoot":""}